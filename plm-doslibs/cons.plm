declare CR literally '13';
declare LF literally '10';
declare EOL literally '24h';

print_char: procedure(chr);
    declare chr byte;
    call dos_std_out(chr);
end print_char;

print_string: procedure(pstr);
    declare pstr pointer;
    declare str based pstr (*) byte;
    declare buf(256) byte;
    declare i byte;
    i = 0;
    do while str(i) <> 0;
        buf(i) = str(i);
        i = i + 1;
    end;
    buf(i) = EOL;
    call dos_std_string_out(@buf);
end print_string;

new_line: procedure;
    call dos_std_string_out(@(CR, LF, EOL));
end new_line;

print_line: procedure(pstr);
    declare pstr pointer;
    call print_string(pstr);
    call new_line;
end print_line;

read_line: procedure(len, pbuf) byte;
    declare len byte;
    declare pbuf pointer;
    declare buf based pbuf (*) byte;
    declare l byte;
    declare i byte;
    buf(0) = len;
    call dos_buffered_std_in(@buf);
    l = buf(1);
    if l <> 0 then
    do;
        do i = 0 to l - 1;
            buf(i) = buf(i + 2);
        end;
    end;
    buf(l) = 0;
    call dos_std_string_out(@(CR, LF, EOL));
    return l;
end read_line;

